<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BoardDAO">
 	<insert id="insertBoard" parameterType="board">
	 	<![CDATA[
	 		insert into board (seq,title,writer,content)
	 		values ((select nvl(max(seq),0)+1 from board),#{title},#{writer},#{content})
	 	]]>
 	</insert>

 	
 	<select id="getBoard" resultType="board">
 		<![CDATA[
	 		select * 
	 		from board 
	 		where seq=#{seq}
	 	]]>
 	</select>
 	
 	
 	<select id="getBoardList" resultMap="boardResult">
 		SELECT *  
 		FROM BOARD 
 		WHERE 1=1 
 		<if test="searchCondition == 'title'">
 			AND TITLE LIKE '%'||#{searchKeyword}||'%'
 		</if> 
 		<if test="searchCondition == 'content'"> 
 			AND CONTENT LIKE '%'||#{searchKeyword}||'%'
 		</if>
 		ORDER BY SEQ DESC
 	</select>
 	
 	 <update id="cntPlus" parameterType="board">
 		<![CDATA[
	 		update board set 
	 			cnt=(select cnt+1 from board where seq=#{seq}) 
	 		where seq=#{seq}
	 	]]>
 	</update>
 	
 	<update id="updateBoard" parameterType="board">
 		<![CDATA[
	 		update board set 
	 			title=#{title},
	 			content=#{content}
 			where seq=#{seq}
	 	]]>
 	</update>
 	
 	<delete id="deleteBoard" parameterType="int">
 		<![CDATA[
	 		delete board 
	 		where seq=#{seq}
	 	]]>
 	</delete>
 	
 	<resultMap type="board" id="boardResult">
 		<id property="seq" column="SEQ" />
 		<result property="title" column="TITLE"/>
 		<result property="writer" column="WRITER"/>
 		<result property="content" column="CONTENT"/>
 		<result property="regDate" column="REGDATE"/>
 		<result property="cnt" column="CNT"/>
 	</resultMap>
</mapper>